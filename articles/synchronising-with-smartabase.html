<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Synchronising with Smartabase • smartabaseR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Synchronising with Smartabase">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">smartabaseR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.12</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/get-started.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/credentials.html">Credential management</a></li>
    <li><a class="dropdown-item" href="../articles/exporting-data.html">Exporting data</a></li>
    <li><a class="dropdown-item" href="../articles/synchronising-with-smartabase.html">Synchronsing with Smartabase</a></li>
    <li><a class="dropdown-item" href="../articles/importing-data.html">Importing data</a></li>
    <li><a class="dropdown-item" href="../articles/deleting-data.html">Deleting data</a></li>
    <li><a class="dropdown-item" href="../articles/helper-functions.html">Helper functions</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Teamworksapp/smartabaseR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Synchronising with Smartabase</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Teamworksapp/smartabaseR/blob/main/vignettes/synchronising-with-smartabase.Rmd" class="external-link"><code>vignettes/synchronising-with-smartabase.Rmd</code></a></small>
      <div class="d-none name"><code>synchronising-with-smartabase.Rmd</code></div>
    </div>

    
    
<p><code><a href="../reference/sb_sync_event.html">sb_sync_event()</a></code> is a way to determine which events have
been entered/updated after a certain time
(<code>last_sync_time</code>):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sync_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sb_sync_event.html">sb_sync_event</a></span><span class="op">(</span></span>
<span>  form <span class="op">=</span> <span class="st">"Example event form"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"synchronise"</span>,</span>
<span>  last_sync_time <span class="op">=</span> <span class="fl">1672531200000</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Note: <code>last_sync_time</code> is represented in unix time, which
means the number of milliseconds since 1970-01-01. For reference we can
convert the unix time value to a UTC datetime object like so:
<code>as.POSIXct(1672531200000/1000, origin = "1970-01-01")</code>.</p>
<p>The above call to <code><a href="../reference/sb_sync_event.html">sb_sync_event()</a></code> will return a tibble
with all of the events that have been inserted/updated since
<code>1672531200000</code> (that is,
<code>01/01/2023 00:00:00 UTC</code>).</p>
<pre><code><span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Form: Example event form</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> HTTP status code: 200</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Export time: 2023-06-01 19:35:58 UTC</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Unique records: 4</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 8</span></span></span>
<span><span class="co">#&gt;   about      user_id form  start_date Distance   RPE entered_by_user_id event_id</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Charlie T…   <span style="text-decoration: underline;">31</span>808 Exam… 15/04/2023     <span style="text-decoration: underline;">5</span>411     7              <span style="text-decoration: underline;">37</span>201    <span style="text-decoration: underline;">16</span>517</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Jack Will…   <span style="text-decoration: underline;">31</span>811 Exam… 15/04/2023     <span style="text-decoration: underline;">2</span>374     3              <span style="text-decoration: underline;">37</span>201    <span style="text-decoration: underline;">36</span>505</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Jamie And…   <span style="text-decoration: underline;">37</span>201 Exam… 15/04/2023     <span style="text-decoration: underline;">1</span>600     6              <span style="text-decoration: underline;">37</span>201    <span style="text-decoration: underline;">36</span>014</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Liam Walk…   <span style="text-decoration: underline;">37</span>204 Exam… 15/04/2023     <span style="text-decoration: underline;">2</span>564     5              <span style="text-decoration: underline;">37</span>201    <span style="text-decoration: underline;">28</span>970</span></span></code></pre>
<p>The data returned from <code><a href="../reference/sb_sync_event.html">sb_sync_event()</a></code> also comes with
specific attributes attached to the data frame. The most important is
the time in which Smartabase returned the data to you. You can access
that value by using the <code><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr()</a></code> function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_sync_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">sync_example</span>, <span class="st">"new_sync_time"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 1.686086e+12</span></span></code></pre>
<p>Now, the next time you synchronise with that form, you can use the
newly acquired <code>new_sync_time</code> value to find any records that
have been inserted/updated since you last called
<code><a href="../reference/sb_sync_event.html">sb_sync_event()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">next_sync_example</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sb_sync_event.html">sb_sync_event</a></span><span class="op">(</span></span>
<span>  form <span class="op">=</span> <span class="st">"Example profile form"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"synchronise"</span>,</span>
<span>  last_sync_time <span class="op">=</span> <span class="va">new_sync_time</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 8</span></span></span>
<span><span class="co">#&gt;   about      user_id form  start_date Distance   RPE entered_by_user_id event_id</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Jamie And…   <span style="text-decoration: underline;">37</span>201 Exam… 18/04/2023     <span style="text-decoration: underline;">3</span>100     7              <span style="text-decoration: underline;">37</span>201    <span style="text-decoration: underline;">62</span>331</span></span></code></pre>
<p>So why is this useful? By querying which records have been
inserted/updated in a form beyond a certain time, you can set up
workflows that automatically trigger R scripts whenever new data is
detected. For more information on how to achieve this, contact
Teamworks.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://au.linkedin.com/in/zac-pross" class="external-link">Zac Pross</a>, <a href="https://au.linkedin.com/in/james-day-ab648321" class="external-link">James Day</a>, Teamworks.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
